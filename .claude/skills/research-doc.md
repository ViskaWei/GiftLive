# 文档化有价值的讨论/实验

将当前对话中的重要发现、实验结果详细记录并同步到知识库。

## 触发词

`doc` / `文档` / `记录`

## Workflow

### Step 1: 识别内容类型

判断当前讨论属于哪种类型：

| 类型 | 特征 | 目标文件 |
|------|------|----------|
| **新实验** | 有明确的实验设计、代码执行、数值结果 | `exp/exp_[name]_[YYYYMMDD].md` |
| **Bug 修复** | 发现并修复了数据/代码问题 | `card/card_[name].md` + hub 更新 |
| **洞见发现** | 从分析中得出重要结论 | hub.md §5 洞见汇合 |
| **设计决策** | 确立了新的设计原则 | hub.md §7 设计原则 |
| **方法论** | 通用的建模/评估方法 | hub.md §5.1 方法论洞见 |

### Step 2: 创建详细记录

#### 2.1 实验报告（如适用）

使用模板 `_backend/template/exp.md`，包含：

```markdown
# 🍃 [实验名称]
> **ID:** `EXP-[YYYYMMDD]-[topic]-[NN]`
> **Status:** ✅ / ❌ / ⏳

## ⚡ 核心结论速览
> **一句话**: [最重要的发现]

| 验证问题 | 结果 | 结论 |
|---------|------|------|

## 1. 🎯 目标
## 2. 🦾 算法
## 3. 🧪 实验设计
## 4. 📊 图表
## 5. 💡 洞见
## 6. 📝 结论
## 7. 📎 附录
```

#### 2.2 知识卡片（如适用）

对于重要的 Bug 修复、设计决策，创建 `card/card_[name].md`：

```markdown
# 🃏 [卡片名称]

## 问题
## 原因
## 解决方案
## 影响
## 教训
```

### Step 3: 提炼核心洞见到 Hub

根据内容类型，更新 hub.md 的对应位置：

| 内容类型 | Hub 位置 | 格式 |
|----------|----------|------|
| 新共识 | §0 共识表 (K1-Kn) | `K[N]` + 一句话 + 证据 + 决策 |
| 实验洞见 | §5.2 本项目验证的洞见 | `E[N]` + 观察 + 解释 + 决策影响 + 证据 |
| 方法论 | §5.1 方法论洞见 | `M[N]` + 通用原则 |
| 设计原则 | §7.1 已确认原则 | `P[N]` + 原则 + 建议 |
| 已关闭方向 | §7.3 已关闭方向 | 方向 + 否定证据 + 教训 |
| 决策空白 | §6 Decision Gaps | `DG[N]` + 问题 + 决策规则 |

### Step 4: 更新 Roadmap（如适用）

- 更新 §2.1 MVP 总览的状态
- 更新 §4.1 结论快照
- 更新 §4.2 时间线
- 更新 §5.1 数值汇总

### Step 5: 输出确认

```
## ✅ 文档化完成

### 创建/更新的文件
| 文件 | 更新内容 |
|------|----------|
| ... | ... |

### 新增洞见
| ID | 洞见 | 决策影响 |
|----|------|----------|
| ... | ... | ... |

### 关键数字
| 指标 | 值 | 条件 |
|------|-----|------|
| ... | ... | ... |
```

## 示例

### 输入
```
doc
```

### 输出
Claude 会：
1. 回顾当前对话中的重要发现
2. 创建/更新实验报告或知识卡片
3. 提炼核心洞见到 hub.md
4. 同步数值到 roadmap.md
5. 输出确认摘要

## 注意事项

- 优先使用已有的实验报告，避免重复创建
- 洞见编号要连续（检查 hub 中已有的最大编号）
- 数值要精确到小数点后 2 位
- 所有结论必须有证据支撑
