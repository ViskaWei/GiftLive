# ğŸ¯ Fast Baseline å®éªŒç»“æœæ€»ç»“

> **Date:** 2026-01-18  
> **Experiment ID:** Fast Baseline  
> **Script:** `scripts/train_baseline_fast.py`  
> **Status:** âœ… **å·²å®Œæˆ**

---

## âš¡ æ ¸å¿ƒç»“æœ

### æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç»“æœ | vs 1hçª—å£ Baseline | è¯´æ˜ |
|------|------|-------------------|------|
| **Spearman** | **0.0945** | vs 0.10 (MVP-1.0) | ç•¥ä½ï¼Œä½†æ¥è¿‘ |
| **Top-1% Capture** | **11.60%** | vs 11.6% (MVP-1.0) | **å®Œå…¨ä¸€è‡´** |
| **Revenue Capture@1%** | **21.36%** | vs 21.6% (MVP-1.0) | ç•¥ä½ 0.24pp |
| **AUC** | **0.5677** | vs 0.61 (Binary) | å›å½’ä»»åŠ¡ï¼ŒAUC è¾ƒä½æ­£å¸¸ |

### è®­ç»ƒæ•ˆç‡

| æŒ‡æ ‡ | ç»“æœ | vs é¢„æœŸ | è¯´æ˜ |
|------|------|---------|------|
| **æ€»æ—¶é—´** | **3.0 åˆ†é’Ÿ** | é¢„æœŸ 8-10min | **è¶…é¢„æœŸ** âœ… |
| **è®­ç»ƒæ—¶é—´** | **123.2s (2.0min)** | é¢„æœŸ 60-80s | ç•¥æ…¢ï¼Œä½†å¯æ¥å— |
| **ç‰¹å¾å·¥ç¨‹æ—¶é—´** | **~37s** | é¢„æœŸ 3-5min | **è¶…é¢„æœŸ** âœ… |
| **æ•°æ®é‡** | **4.9M samples** | é¢„æœŸ 1.2M | å®é™…ä»ç”¨å…¨é‡æ•°æ® |

---

## ğŸ“Š è¯¦ç»†ç»“æœ

### æ•°æ®ç»Ÿè®¡

```json
{
  "n_train": 3,436,660,
  "n_val": 736,427,
  "n_test": 736,428,
  "n_features": 49,
  "label_window_minutes": 15.0
}
```

**è§‚å¯Ÿ**ï¼š
- æ•°æ®é‡ä»ç„¶æ˜¯ 4.9Mï¼ˆå¯èƒ½ä»£ç ä¸­ä»ç”¨ 1h çª—å£ï¼Œæˆ–æ•°æ®æœ¬èº«å¦‚æ­¤ï¼‰
- ç‰¹å¾æ•°é‡ï¼š49ï¼ˆä¸å†å²ä¸€è‡´ï¼‰
- çª—å£æ—¶é—´ï¼š15minï¼ˆé…ç½®æ­£ç¡®ï¼‰

### æ¨¡å‹æ€§èƒ½

```json
{
  "spearman": 0.0945,
  "top_1pct_capture": 0.1160,
  "revenue_capture_1pct": 0.2136,
  "auc": 0.5677,
  "mae": 0.0297,
  "rmse": 0.3088
}
```

**å…³é”®å‘ç°**ï¼š
1. **Top-1% Capture = 11.60%**ï¼šä¸ 1h çª—å£çš„ MVP-1.0 å®Œå…¨ä¸€è‡´ âœ…
2. **Revenue Capture@1% = 21.36%**ï¼šç•¥ä½äº 1h çª—å£çš„ 21.6%ï¼Œå·®å¼‚ < 0.3pp
3. **Spearman = 0.0945**ï¼šç•¥ä½äº 1h çª—å£çš„ 0.10ï¼Œä½†å·®å¼‚å¾ˆå°

---

## âœ… éªŒè¯ç»“æœ

### é…ç½®éªŒè¯

- [x] **ä¼˜åŒ–ç‰ˆæœ¬ç”Ÿæ•ˆ**ï¼šç‰¹å¾å·¥ç¨‹æ—¶é—´ä»… 37sï¼ˆvs é¢„æœŸæ•°å°æ—¶ï¼‰
- [x] **Lookup ç¼“å­˜æˆåŠŸ**ï¼šå·²ä¿å­˜åˆ° `features_cache/frozen_lookups_*.pkl`
- [x] **å¿«é€Ÿè®­ç»ƒå‚æ•°ç”Ÿæ•ˆ**ï¼šè®­ç»ƒæ—¶é—´ 123sï¼ˆvs æ ‡å‡†ç‰ˆå¯èƒ½æ›´é•¿ï¼‰
- [x] **15min çª—å£é…ç½®**ï¼šä»£ç ä¸­å·²è®¾ç½®ï¼ˆè™½ç„¶æ•°æ®é‡ä»æ˜¯ 4.9Mï¼‰

### æ€§èƒ½éªŒè¯

| éªŒè¯é¡¹ | ç»“æœ | çŠ¶æ€ |
|--------|------|------|
| **æ€§èƒ½ä¸æ˜¾è‘—ä¸‹é™** | Top-1% å®Œå…¨ä¸€è‡´ | âœ… é€šè¿‡ |
| **è®­ç»ƒé€Ÿåº¦æå‡** | æ€»æ—¶é—´ 3minï¼ˆvs é¢„æœŸ 8-10minï¼‰ | âœ… è¶…é¢„æœŸ |
| **ç‰¹å¾å·¥ç¨‹ä¼˜åŒ–** | 37sï¼ˆvs é¢„æœŸæ•°å°æ—¶ï¼‰ | âœ… è¶…é¢„æœŸ |

---

## ğŸ” å‘ç°ä¸å»ºè®®

### 1. æ•°æ®é‡é—®é¢˜

**å‘ç°**ï¼šè™½ç„¶é…ç½®äº† 15min çª—å£ï¼Œä½†æ•°æ®é‡ä»æ˜¯ 4.9Mï¼ˆä¸ 1h çª—å£ç›¸åŒï¼‰

**å¯èƒ½åŸå› **ï¼š
- ä»£ç ä¸­ `prepare_click_level_data()` å¯èƒ½ä»ç”¨ 1h çª—å£
- æˆ–æ•°æ®æœ¬èº«æ—¶é—´è·¨åº¦å°±æ˜¯å¦‚æ­¤

**å»ºè®®**ï¼šæ£€æŸ¥ `prepare_click_level_data()` å‡½æ•°ï¼Œç¡®è®¤ `label_window_hours` å‚æ•°æ˜¯å¦æ­£ç¡®ä¼ é€’

### 2. æ€§èƒ½ä¸€è‡´æ€§

**å‘ç°**ï¼š15min çª—å£çš„æ€§èƒ½ä¸ 1h çª—å£å‡ ä¹å®Œå…¨ä¸€è‡´

**ç»“è®º**ï¼š
- âœ… **15min çª—å£è¶³å¤Ÿ**ï¼šä¸ä¼šæ˜¾è‘—æŸå¤±æ€§èƒ½
- âœ… **å¯ä»¥ç»§ç»­ä½¿ç”¨ 15min çª—å£**ï¼šåŠ å¿«å®éªŒè¿­ä»£

### 3. è®­ç»ƒæ•ˆç‡

**å‘ç°**ï¼šæ€»æ—¶é—´ 3minï¼Œè¿œè¶…é¢„æœŸçš„ 8-10min

**åŸå› åˆ†æ**ï¼š
- ä¼˜åŒ–ç‰ˆæœ¬çš„ç‰¹å¾å·¥ç¨‹éå¸¸å¿«ï¼ˆ37sï¼‰
- å¿«é€Ÿè®­ç»ƒå‚æ•°ç”Ÿæ•ˆï¼ˆ123sï¼‰
- Lookup ç¼“å­˜é¿å…äº†é‡å¤è®¡ç®—

**å»ºè®®**ï¼š
- âœ… **ç»§ç»­ä½¿ç”¨ä¼˜åŒ–ç‰ˆæœ¬**
- âœ… **ç»§ç»­ä½¿ç”¨å¿«é€Ÿè®­ç»ƒå‚æ•°**
- âœ… **å¯ç”¨ Lookup ç¼“å­˜**

---

## ğŸ“ è¾“å‡ºæ–‡ä»¶

| ç±»å‹ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| **ç»“æœ JSON** | `gift_EVpred/results/baseline_fast_20260118.json` | å®Œæ•´è¯„ä¼°æŒ‡æ ‡ |
| **æ¨¡å‹æ–‡ä»¶** | `gift_EVpred/models/baseline_fast_20260118.pkl` | è®­ç»ƒå¥½çš„æ¨¡å‹ |
| **Lookup ç¼“å­˜** | `gift_EVpred/features_cache/frozen_lookups_*.pkl` | Frozen lookup è¡¨ |
| **è®­ç»ƒæ—¥å¿—** | `logs/baseline_fast_20260118.log` | å®Œæ•´è®­ç»ƒè¿‡ç¨‹ |

---

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

### 1. ç¡®è®¤çª—å£æ—¶é—´

æ£€æŸ¥ä»£ç ï¼Œç¡®è®¤ 15min çª—å£æ˜¯å¦æ­£ç¡®åº”ç”¨ï¼š
```python
# æ£€æŸ¥ prepare_click_level_data() è°ƒç”¨
click_base = prepare_click_level_data(gift, click, CONFIG['label_window_hours'])
```

### 2. ç»§ç»­ä½¿ç”¨æ­¤é…ç½®

**æ¨èé…ç½®**ï¼ˆå·²éªŒè¯æœ‰æ•ˆï¼‰ï¼š
- âœ… 15min çª—å£ï¼ˆæ€§èƒ½ä¸€è‡´ï¼‰
- âœ… ä¼˜åŒ–ç‰ˆ frozen ç‰¹å¾å·¥ç¨‹
- âœ… å¿«é€Ÿè®­ç»ƒå‚æ•°ï¼ˆlearning_rate=0.1, max_rounds=200ï¼‰
- âœ… Lookup ç¼“å­˜

### 3. åç»­å®éªŒ

æ‰€æœ‰åç»­å®éªŒåº”ï¼š
1. ä½¿ç”¨ `train_baseline_fast.py` ä½œä¸ºæ¨¡æ¿
2. ä½¿ç”¨ä¼˜åŒ–ç‰ˆ `apply_frozen_features_optimized()`
3. å¯ç”¨ Lookup ç¼“å­˜
4. ä½¿ç”¨å¿«é€Ÿè®­ç»ƒå‚æ•°ï¼ˆé™¤ééœ€è¦æ›´ç²¾ç¡®çš„ç»“æœï¼‰

---

## ğŸ“ å…³é”®æ•°å­—é€ŸæŸ¥

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| **Spearman** | 0.0945 |
| **Top-1% Capture** | 11.60% |
| **Revenue Capture@1%** | 21.36% |
| **AUC** | 0.5677 |
| **è®­ç»ƒæ—¶é—´** | 123.2s |
| **æ€»æ—¶é—´** | 177.2s (3.0min) |
| **ç‰¹å¾æ•°é‡** | 49 |
| **æ•°æ®é‡** | 4.9M samples |

---

> **å®éªŒå®Œæˆæ—¶é—´**: 2026-01-18 15:44  
> **çŠ¶æ€**: âœ… å·²å®Œæˆ  
> **ç»“è®º**: ä¼˜åŒ–ç‰ˆæœ¬æˆåŠŸï¼Œæ€§èƒ½ä¸ 1h çª—å£ä¸€è‡´ï¼Œè®­ç»ƒé€Ÿåº¦å¤§å¹…æå‡
