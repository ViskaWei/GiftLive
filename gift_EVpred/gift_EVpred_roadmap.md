# ğŸ—ºï¸ Gift_EVpred Roadmap
> **Name:** Gift EV Model Roadmap | **ID:** `EXP-20260118-gift_EVpred-roadmap`
> **Topic:** `gift_EVpred` | **Phase:** 1 (Final Baseline v1.0 å·²å‘å¸ƒ)
> **Author:** Viska Wei | **Date:** 2026-01-18 | **Update:** 2026-01-19 | **Status:** âœ…

```
ğŸ’¡ Final Baseline v1.0 å·²å‘å¸ƒ
- RevCap@1% = 51.4%ï¼ˆé¦–æ¬¡çªç ´ 50% ç›®æ ‡ï¼‰
- CV = 9.4%ï¼ˆé¦–æ¬¡ < 10% é˜ˆå€¼ï¼‰
- 20 ç‰¹å¾ (Strict Mode) + 1min çª—å£ + Last-Touch å½’å› 
```

---

## ğŸ“Š Final Baseline ç»“æœï¼ˆ2026-01-19ï¼‰

| æŒ‡æ ‡ | å€¼ | è¯´æ˜ |
|------|-----|------|
| **RevCap@1%** | **51.4%** | Top 1% æ•è· 51.4% æ”¶å…¥ |
| **CV** | **9.4%** | ç¨³å®šæ€§é¦–æ¬¡ < 10% |
| 95% CI | [47.2%, 54.4%] | Bootstrap ç½®ä¿¡åŒºé—´ |
| ç‰¹å¾æ•° | 20 | Strict Mode |
| æ ‡ç­¾çª—å£ | 1 min | è¦†ç›– 92.6% gift |

---

## ğŸ”— Related Files

| Type | File |
|------|------|
| ğŸ§  Hub | `gift_EVpred_hub.md` |
| ğŸ“„ **Data Utils** | `data_utils.py` (Final v1.0) |
| ğŸ“Š **Final Result** | `results/baseline_ridge_final_20260119.json` |
| ğŸ“— Baseline Report | `exp/exp_baseline_ridge_20260119.md` |
| ğŸ—ƒï¸ Archive (Leaky) | `exp/archive_leaky/` |

---

# 1. ğŸš¦ Decision Gates

## 1.1 Gate è¿›åº¦

| Gate | çŠ¶æ€ | ç»“æœ | è¯´æ˜ |
|------|------|------|------|
| **Gate-0** | âœ… é€šè¿‡ | 200/200 | Day-Frozen ç‰¹å¾æ— æ³„æ¼éªŒè¯ |
| **Gate-1** | âœ… é€šè¿‡ | 52.60% | Direct + raw Y æœ€ä¼˜ |
| **Gate-2** | âŒ å¤±è´¥ | -14.5% | LightGBM åŠ£äº Ridge |
| Gate-3 | â³ è¿œæœŸ | - | æ¨¡æ‹Ÿå™¨éªŒè¯ |

## 1.2 Gate å®šä¹‰

### Gate-0: æ— æ³„æ¼éªŒè¯ ã€âœ… å·²é€šè¿‡ã€‘

| é¡¹ | å†…å®¹ |
|----|------|
| **éªŒè¯** | Day-Frozen ç‰¹å¾æ˜¯å¦çœŸçš„æ— æ³„æ¼ |
| **æ–¹æ³•** | å¯¹æ¯ä¸ª clickï¼ŒéªŒè¯å†å²ç‰¹å¾åªç”¨ `day < click_day` çš„æ•°æ® |
| **ç»“æœ** | âœ… 200/200 æ ·æœ¬éªŒè¯é€šè¿‡ |

### Gate-1: Direct vs Two-Stage ã€âœ… å·²é€šè¿‡ã€‘

| é¡¹ | å†…å®¹ |
|----|------|
| **éªŒè¯** | å“ªç§å»ºæ¨¡æ–¹æ¡ˆåœ¨ Revenue Capture ä¸Šæ›´ä¼˜ |
| **ç»“æœ** | âœ… Two-Stage 44.42% > Direct 37.73%ï¼ˆ+17.8%ï¼‰ |
| **ç»“è®º** | æ¨è Two-Stage ä½œä¸ºåç»­ baseline |

### Gate-2: æ¨¡å‹å‡çº§ ã€âŒ å¤±è´¥ã€‘

| é¡¹ | å†…å®¹ |
|----|------|
| **éªŒè¯** | LightGBM æ˜¯å¦ä¼˜äº Linear æ¨¡å‹ |
| **ç»“æœ** | âŒ LightGBM RevCap@1%=44.97% < Ridge 52.60%ï¼ˆ-14.5%ï¼‰ |
| **åŸå› ** | 98.5% æ ·æœ¬ target=0ï¼Œæ ‘æ¨¡å‹å€¾å‘é¢„æµ‹ä¼—æ•° |
| **ç»“è®º** | Linear æ¨¡å‹ï¼ˆRidgeï¼‰ä»æ˜¯å½“å‰æœ€ä¼˜ |

### Gate-3: æ¨¡æ‹Ÿå™¨éªŒè¯

| é¡¹ | å†…å®¹ |
|----|------|
| **éªŒè¯** | æ¨¡æ‹Ÿå™¨èƒ½å¦ç”¨äºç­–ç•¥è¯„ä¼°ï¼ˆOPE/åˆ†é…ä¼˜åŒ–ï¼‰ |
| **çŠ¶æ€** | â³ è¿œæœŸ |

---

# 2. ğŸ“‹ MVP åˆ—è¡¨

## 2.1 æ€»è§ˆ

| MVP | åç§° | çŠ¶æ€ | ç»“æœ | æŠ¥å‘Š |
|-----|------|------|------|------|
| **1.0** | Day-Frozen Baseline | âœ… | - | [Link](./exp/exp_baseline_day_frozen_20260118.md) |
| **1.1** | Three-Stage (Whale-only) | âŒ | å¤±è´¥ | [Link](./exp/exp_three_stage_20260118.md) |
| **1.2** | Raw Y vs Log Y | âœ… | raw Y èƒœ | [Link](./exp/exp_raw_vs_log_20260118.md) |
| **2.0** | LightGBM + raw Y | âŒ | å¤±è´¥ | [Link](./exp/exp_lightgbm_raw_y_20260118.md) |
| **3.0** | ä¸‰å±‚æŒ‡æ ‡ä½“ç³» | âœ… | - | [Link](./exp/exp_metrics_framework_20260118.md) |
| **3.1** | æŒ‡æ ‡ä½“ç³»è½åœ° | âœ… | - | [Link](./exp/exp_metrics_landing_20260119.md) |
| **3.2** | **Final Baseline v1.0** | **âœ…** | **51.4%** | [Link](./exp/exp_baseline_ridge_20260119.md) |
| 3.3 | å†å²è§‚çœ‹å…ˆéªŒ | â³ | - | [Link](./exp/exp_watch_history_prior_20260119.md) |
| 3.4 | æ ·æœ¬åŠ æƒå›å½’ | â³ | - | [Link](./exp/exp_weighted_regression_20260119.md) |
| **4.0** | **é¢„æµ‹ç›®æ ‡æ‰©å±•** | **ğŸ”„** | **æ–°ç«‹é¡¹** | [Link](./exp/exp_prediction_target_expansion_20260119.md) |
| 5.0 | åˆ†é… MVP | â³ | - | - |

## 2.2 ä¸‹ä¸€æ­¥ä¼˜å…ˆçº§ï¼ˆ2026-01-19ï¼‰

**å·²å®Œæˆ**ï¼ˆæœ¬è½®è¿­ä»£ï¼‰ï¼š
- âœ… data_utils.py Final v1.0
- âœ… Final Baseline: RevCap@1%=51.4%, CV=9.4%
- âœ… æ–‡æ¡£æ•´ç†å®Œæˆ

**ä¸‹ä¸€æ­¥**ï¼š

| ä¼˜å…ˆçº§ | ä»»åŠ¡ | éªŒæ”¶æ ‡å‡† | çŠ¶æ€ |
|--------|------|----------|------|
| ğŸ”´ **P0** | **é¢„æµ‹ç›®æ ‡æ‰©å±• (MVP-4.0)** | ç•™å­˜ AUC > 0.6 | ğŸ”„ æ–°ç«‹é¡¹ |
| ğŸ”´ P0 | å†å²è§‚çœ‹å…ˆéªŒç‰¹å¾ | RevCap > 54% | â³ |
| ğŸŸ¡ P1 | æ ·æœ¬åŠ æƒå›å½’ | RevCap > 55% | â³ |
| ğŸŸ¡ P1 | Whale ä¸“å±ç‰¹å¾ | RevCap > 54% | å¾…ç«‹é¡¹ |
| ğŸŸ¢ P2 | å°è¯• MLP | RevCap > 55% | å¾…ç«‹é¡¹ |
| ğŸŸ¢ P3 | åˆ†é… MVP | æ€»æ”¶ç›Š+Gini | å¾…ç«‹é¡¹ |

---

# 3. ğŸ”§ MVP è§„æ ¼

## MVP-1.0: Day-Frozen Baseline ã€âœ… å®Œæˆã€‘

| é¡¹ | é…ç½® |
|----|------|
| **ç›®æ ‡** | å»ºç«‹æ— æ³„æ¼ EV é¢„æµ‹ baseline |
| **æ•°æ®** | Click-levelï¼Œ4.9M æ ·æœ¬ï¼Œ7-7-7 æŒ‰å¤©åˆ‡åˆ† |
| **ç‰¹å¾** | 31 ä¸ª Day-Frozen ç‰¹å¾ï¼ˆpair/user/streamer å†å² + profile + timeï¼‰ |
| **æ¨¡å‹** | Direct (Ridge) + Two-Stage (LR + Ridge) |
| **ä¸»æŒ‡æ ‡** | Revenue Capture @K |
| **ç»“æœ** | âœ… Two-Stage RevCap@1% = 44.42% |

**å…³é”®è®¾è®¡**ï¼š
- Day-Frozenï¼šå†å²ç‰¹å¾åªç”¨ `day < current_day` çš„æ•°æ®
- `pd.merge_asof(..., allow_exact_matches=False)` å®ç°ä¸¥æ ¼ `<` è¯­ä¹‰
- Val/Test ä½¿ç”¨ Train ç»“æŸæ—¶çš„ç»Ÿè®¡ï¼ˆFrozen Lookupï¼‰

## MVP-1.1: Three-Stage (Whale-only) ã€âœ… å®Œæˆã€‘

| é¡¹ | é…ç½® |
|----|------|
| **ç›®æ ‡** | ä¸“æ³¨é¢„æµ‹"è¶…çº§å¤§å“¥"ï¼ˆWhaleï¼‰ï¼Œæå‡ Revenue Capture |
| **æ•°æ®** | åŒ MVP-1.0ï¼ŒClick-levelï¼Œ7-7-7 æŒ‰å¤©åˆ‡åˆ† |
| **ç­–ç•¥** | Whale-only: Score = P(whale) Ã— E[whale] |
| **é˜ˆå€¼** | P90 = 100å…ƒï¼ˆtop 10% giftersï¼‰ |
| **ç»“æœ** | **RevCap@1% = 43.60%**ï¼Œæ¯” Two-Stage æå‡ **36.2%** |

**æ ¸å¿ƒå‘ç°**ï¼š
- æ ‡å‡† Three-Stage åè€Œä¸å¦‚ Two-Stage
- Whale-only ç­–ç•¥å®Œèƒœï¼šä¸“æ³¨é¢„æµ‹è¶…çº§å¤§å“¥
- é˜ˆå€¼è¶Šé«˜æ•ˆæœè¶Šå¥½ï¼ˆP50 < P60 < ... < P90ï¼‰

## MVP-1.2: Raw Y vs Log Y ã€âœ… å®Œæˆã€‘

| é¡¹ | é…ç½® |
|----|------|
| **ç›®æ ‡** | å¯¹æ¯” raw Y å’Œ log(1+Y) é¢„æµ‹ç›®æ ‡ |
| **æ•°æ®** | åŒ MVP-1.0ï¼ŒClick-levelï¼Œ7-7-7 æŒ‰å¤©åˆ‡åˆ† |
| **æ¨¡å‹** | Direct (Ridge) + Two-Stage (LR + Ridge) |
| **ç»“æœ** | **Direct + raw Y: RevCap@1% = 52.68%**ï¼ˆ+39.6%ï¼‰ |

**æ ¸å¿ƒå‘ç°**ï¼š
- Raw Y æ¯” log(1+Y) åœ¨ RevCap@1% ä¸Šæå‡ **39.6%**
- Spearman å’Œ RevCap å‘ˆè´Ÿç›¸å…³ï¼ˆTrade-offï¼‰
- Log å˜æ¢å‹ç¼© whale ä¿¡å·ï¼ŒæŸå¤±æ”¶å…¥æ•è·èƒ½åŠ›
- ä¸šç•Œæ¨èï¼šæ”¶å…¥æœ€å¤§åŒ–åœºæ™¯ä½¿ç”¨ raw Y

## MVP-2.0: LightGBM + Raw Y ã€âŒ å¤±è´¥ã€‘

| é¡¹ | é…ç½® |
|----|------|
| **ç›®æ ‡** | ç”¨ LightGBM æ›¿ä»£ Linear æ¨¡å‹ |
| **é¢„æœŸ** | éçº¿æ€§ç‰¹å¾äº¤äº’å¯èƒ½æå‡ RevCap |
| **ç»“æœ** | âŒ LightGBM RevCap@1%=44.97% < Ridge 52.60%ï¼ˆ-14.5%ï¼‰ |

**å¤±è´¥åŸå› **ï¼š
- 98.5% æ ·æœ¬ target=0ï¼Œæ ‘æ¨¡å‹å€¾å‘é¢„æµ‹ä¼—æ•°ï¼ˆ0ï¼‰
- Best iteration=1ï¼Œæ¨¡å‹ç«‹å³è§¦å‘ early stopping
- æ ‘æ¨¡å‹çš„é˜¶è·ƒå‡½æ•°é¢„æµ‹åœ¨æ’åºä»»åŠ¡ä¸ŠåŠ£äºçº¿æ€§æ¨¡å‹çš„å¹³æ»‘é¢„æµ‹

---

## MVP-3.1: æŒ‡æ ‡ä½“ç³»è½åœ° ã€âœ… å®Œæˆã€‘

| é¡¹ | é…ç½® |
|----|------|
| **ID** | `EXP-20260119-EVpred-01` |
| **ç›®æ ‡** | å°†ä¸‰å±‚æŒ‡æ ‡ä½“ç³»ä»è®¾è®¡è½å®åˆ°ç»Ÿä¸€æŠ¥å‘Šæ¨¡æ¿ |
| **äº§å‡º** | RevCap æ›²çº¿ + Tail Calibration + ç¨³å®šæ€§è¯„ä¼° |
| **éªŒæ”¶** | âœ… æ‰€æœ‰åç»­å®éªŒä½¿ç”¨ç»Ÿä¸€æ¨¡æ¿ |
| **æŠ¥å‘Š** | [exp_metrics_landing_20260119.md](./exp/exp_metrics_landing_20260119.md) |

**å…³é”®ç»“æœ**ï¼š
- RevCap@1% = 52.6%ï¼ˆNormalized 52.8%ï¼‰
- ç¨³å®šæ€§ CV = 10.8%ï¼ˆç•¥è¶… 10% é˜ˆå€¼ï¼‰
- Tail Calibration = 2.2-2.5xï¼ˆé«˜ä¼°ä½†ä¸å½±å“æ’åºï¼‰
- Day 7 è¡¨ç°æœ€å·®ï¼ˆ42.8%ï¼‰ï¼Œéœ€å…³æ³¨

---

## MVP-3.2: Final Baseline v1.0 ã€âœ… å®Œæˆã€‘

| é¡¹ | é…ç½® |
|----|------|
| **ID** | `EXP-20260119-EVpred-02` |
| **ç›®æ ‡** | ç¡®ç«‹æ ‡å‡†åŸºçº¿æ¨¡å‹ï¼Œä¾›åç»­å®éªŒå¯¹ç…§ |
| **æ¨¡å‹** | Ridge Regression (alpha=1.0, raw Y) |
| **ç‰¹å¾æ•°** | **20 (Strict Mode)** |
| **æ ‡ç­¾çª—å£** | **1 åˆ†é’Ÿ** |
| **å½’å› æ–¹å¼** | **Last-Touch + gift_id å»é‡** |
| **æŠ¥å‘Š** | [exp_baseline_ridge_20260119.md](./exp/exp_baseline_ridge_20260119.md) |

**å…³é”®æ•°å­—**ï¼š
| æŒ‡æ ‡ | å€¼ |
|------|-----|
| **RevCap@1%** | **51.4%** |
| **CV (ç¨³å®šæ€§)** | **9.4%** |
| 95% CI | [47.2%, 54.4%] |
| Whale Recall@1% | 34.6% |
| Whale Precision@1% | 5.0% |

**å·¥ä»¶æ¸…å•**ï¼š
- ç»“æœï¼š`results/baseline_ridge_final_20260119.json`
- æ•°æ®æ¨¡å—ï¼š`data_utils.py`
- æŒ‡æ ‡æ¨¡å—ï¼š`metrics.py`

---

## MVP-4.0: é¢„æµ‹ç›®æ ‡æ‰©å±• ã€ğŸ”„ æ–°ç«‹é¡¹ã€‘

| é¡¹ | é…ç½® |
|----|------|
| **ID** | `EXP-20260119-EVpred-05` |
| **ç›®æ ‡** | ä»"é¢„æµ‹ gift"æ‰©å±•åˆ°"é¢„æµ‹è¡ŒåŠ¨çš„åæœ" |
| **æ ¸å¿ƒæ€è·¯** | ä¸åªé¢„æµ‹çŸ­æœŸæ”¶ç›Šï¼Œè¿˜é¢„æµ‹ç”¨æˆ·ç•™å­˜ã€ç”Ÿæ€å¥åº· |
| **æŠ¥å‘Š** | [exp_prediction_target_expansion_20260119.md](./exp/exp_prediction_target_expansion_20260119.md) |

**å¤šç›®æ ‡é¢„æµ‹æ¡†æ¶**ï¼š
$$R(a) = w_{rev} \cdot r^{rev}(a) + w_{usr} \cdot r^{usr}(a) + w_{eco} \cdot r^{eco}(a)$$

| ç»´åº¦ | ç¬¦å· | å®šä¹‰ | çŠ¶æ€ |
|------|------|------|------|
| çŸ­æœŸæ”¶ç›Š | $r^{rev}$ | E[gift_amount] | âœ… å·²æœ‰ |
| ç”¨æˆ·ç•™å­˜ | $r^{usr}$ | E[return_1d] | â³ å¾…æ„å»º |
| ç”Ÿæ€å¥åº· | $r^{eco}$ | -Gini(exposure) | â³ å¾…æ„å»º |

**éªŒæ”¶æ ‡å‡†**ï¼š
- ç•™å­˜é¢„æµ‹ AUC > 0.6
- çŸ­æœŸ RevCap@1% â‰¥ 51.4%ï¼ˆä¸é€€åŒ–ï¼‰

---

## MVP-3.3: å†å²è§‚çœ‹å…ˆéªŒç‰¹å¾ ã€â³ å¾…æ‰§è¡Œã€‘

| é¡¹ | é…ç½® |
|----|------|
| **ID** | `EXP-20260119-EVpred-03` |
| **ç›®æ ‡** | ç”¨å†å²è§‚çœ‹å…ˆéªŒæ›¿ä»£è¢«åˆ é™¤çš„ watch_live_time |
| **æ–°ç‰¹å¾** | `user_watch_mean_7d`, `pair_watch_mean`, `user_watch_p90` ç­‰ |
| **éªŒæ”¶** | RevCap > 54% |
| **æŠ¥å‘Š** | [exp_watch_history_prior_20260119.md](./exp/exp_watch_history_prior_20260119.md) |

---

## MVP-3.4: æ ·æœ¬åŠ æƒå›å½’ ã€â³ å¾…æ‰§è¡Œã€‘

| é¡¹ | é…ç½® |
|----|------|
| **ID** | `EXP-20260119-EVpred-04` |
| **ç›®æ ‡** | é€šè¿‡æ ·æœ¬åŠ æƒè®©æ¨¡å‹æ›´å…³æ³¨å¤´éƒ¨æ ·æœ¬ |
| **æ–¹æ³•** | $w_i = (1 + y_i)^\alpha$, $\alpha \in [0.3, 1.0]$ |
| **éªŒæ”¶** | RevCap > 55% |
| **æŠ¥å‘Š** | [exp_weighted_regression_20260119.md](./exp/exp_weighted_regression_20260119.md) |

---

# 4. ğŸ“Š è¿›åº¦è¿½è¸ª

## 4.1 ç»“è®ºå¿«ç…§

| MVP | ç»“è®º | å…³é”®æŒ‡æ ‡ | çŠ¶æ€ |
|-----|------|---------|------|
| **1.0** | Day-Frozen Baseline | æ¡†æ¶å»ºç«‹ | âœ… |
| **1.1** | Three-Stage | å¤±è´¥ | âŒ |
| **1.2** | Raw Y vs Log Y | raw Y èƒœ | âœ… |
| **2.0** | LightGBM | å¤±è´¥ï¼ˆæ ‘ä¸é€‚åˆç¨€ç–ï¼‰ | âŒ |
| **3.0** | æŒ‡æ ‡ä½“ç³»è®¾è®¡ | ä¸‰å±‚æ¡†æ¶ | âœ… |
| **3.1** | æŒ‡æ ‡ä½“ç³»è½åœ° | æ¨¡å—åŒ– | âœ… |
| **3.2** | **Final Baseline v1.0** | **RevCap=51.4%, CV=9.4%** | âœ… |
| **3.3** | å†å²è§‚çœ‹å…ˆéªŒ | RevCap > 54% | â³ |
| **3.4** | æ ·æœ¬åŠ æƒå›å½’ | RevCap > 55% | â³ |

## 4.2 æ—¶é—´çº¿

| æ—¥æœŸ | äº‹ä»¶ | å½±å“ |
|------|------|------|
| 2026-01-18 | åˆ›å»º Day-Frozen æ— æ³„æ¼æ¡†æ¶ | è§£å†³æ•°æ®æ³„æ¼é—®é¢˜ |
| 2026-01-18 | å»ºç«‹ Direct vs Two-Stage baseline | åŸºå‡† 37.73% |
| 2026-01-18 | å½’æ¡£æ‰€æœ‰æœ‰æ³„æ¼çš„æ—§å®éªŒ | 24 ä¸ªå®éªŒç§»è‡³ archive_leaky/ |
| 2026-01-18 | Three-Stage Whale-only å®éªŒ | RevCap@1% = 43.60% (log Y) |
| 2026-01-18 | **Raw Y vs Log Y å®éªŒ** | **RevCap@1% = 52.60%ï¼ˆå½“å‰æœ€ä¼˜ï¼‰** |
| 2026-01-18 | Expert Review æ•´åˆ | è¯†åˆ« 4 ä¸ªæ½œåœ¨é—®é¢˜ï¼›æ˜ç¡® Frozen vs Rolling åè®® trade-off |
| 2026-01-18 | **P0-Tech éªŒè¯é€šè¿‡** | 3 ä¸ªé—®é¢˜ä¸å­˜åœ¨ï¼ˆDay-Frozen è®¾è®¡æ­£ç¡®ï¼‰ï¼Œ1 ä¸ªå·²ä¿®å¤ï¼ˆCategory ç¼–ç ï¼‰ |
| 2026-01-18 | **LightGBM å®éªŒå¤±è´¥** | RevCap@1%=44.97%ï¼ˆ-14.5%ï¼‰ï¼Œæ ‘æ¨¡å‹ä¸é€‚åˆç¨€ç–æ•°æ® |
| 2026-01-18 | **Three-Stage + raw Y å®éªŒ** | RevCap@1%=39.48%ï¼ˆåŠ£äº Directï¼‰ï¼Œç¡®è®¤ Direct + raw Y æœ€ä¼˜ |
| 2026-01-19 | **æ–°å®éªŒç«‹é¡¹** | 3 ä¸ª MVPï¼šæŒ‡æ ‡è½åœ°(3.1) + å†å²è§‚çœ‹å…ˆéªŒ(3.2) + æ ·æœ¬åŠ æƒå›å½’(3.3) |
| 2026-01-19 | **æŒ‡æ ‡ä½“ç³»è½åœ°** | ç»Ÿä¸€è¯„ä¼°æ¨¡å— metrics.pyï¼Œæ‰€æœ‰å®éªŒä½¿ç”¨ç»Ÿä¸€æŒ‡æ ‡ |
| 2026-01-19 | **Baseline ç¡®ç«‹** | ä¿å­˜æ¨¡å‹/ç‰¹å¾/é…ç½®ï¼Œå»ºç«‹ card_baseline.md + card_metric.md |
| 2026-01-19 | **ğŸ”´ Over-Attribution ä¿®å¤** | 8.43% gift è¢«é‡å¤è®¡å…¥ â†’ Last-Touchï¼›Label/Gift ratio 116.78%â†’92.37% |
| 2026-01-19 | **Baseline é‡è·‘** | RevCap@1%=51.0%ï¼ˆä¿®å¤åæ ‡ç­¾æ›´å‡†ç¡®ï¼‰ |

---

# 5. ğŸ“ é™„å½•

## 5.1 æ•°å€¼æ±‡æ€»

| æ¨¡å‹ | RevCap@1% | CV | ç‰¹å¾æ•° | å¤‡æ³¨ |
|------|-----------|-----|--------|------|
| **Ridge (Strict, 1min)** | **51.4%** | **9.4%** | 20 | âœ… **Final Baseline** |
| Two-Stage raw Y | ~43% | - | 31 | |
| Direct log Y | ~35% | - | 31 | |
| LightGBM raw Y | ~45% | - | 31 | âŒ å¤±è´¥ |
| Whale-only | ~38% | - | 31 | âŒ å¤±è´¥ |
| Oracle | ~99% | - | - | ç†è®ºä¸Šç•Œ |

> **å…³é”®ç»“è®º**ï¼š
> - Strict æ¨¡å¼ï¼ˆ20 ç‰¹å¾ï¼‰ä¸ Benchmarkï¼ˆ31 ç‰¹å¾ï¼‰æ•ˆæœç›¸åŒï¼Œé€‰æ‹©æ›´ç®€å•çš„ Strict
> - 1 åˆ†é’Ÿçª—å£è¦†ç›– 92.6% giftï¼Œä¸ 60 åˆ†é’Ÿçª—å£æ•ˆæœç›¸åŒ
> - Linear æ¨¡å‹å·²è¾¾ç“¶é¢ˆï¼Œä¸‹ä¸€æ­¥éœ€è¦ç‰¹å¾å·¥ç¨‹æˆ– MLP

## 5.2 è¿è¡Œè·¯å¾„

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `data_utils.py` | æ•°æ®å¤„ç†å…¥å£ |
| `features_cache/day_frozen_features_lw1h.parquet` | ç‰¹å¾ç¼“å­˜ |
| `results/raw_vs_log_comparison_20260118.json` | Raw vs Log ç»“æœ |

## 5.3 æ›´æ–°æ—¥å¿—

| æ—¥æœŸ | å˜æ›´ |
|------|------|
| 2026-01-18 | åˆ›å»º Day-Frozen ç‰ˆæœ¬ï¼Œå½’æ¡£æ‰€æœ‰æœ‰æ³„æ¼çš„æ—§å®éªŒ |
| 2026-01-18 | Raw Y vs Log Y å®éªŒï¼šRevCap@1% = 52.60%ï¼ˆ+39.6%ï¼‰ |
| 2026-01-18 | LightGBM å®éªŒï¼šRevCap@1% = 44.97%ï¼ˆ-14.5%ï¼‰ï¼Œå¤±è´¥ |
| 2026-01-18 | Three-Stage + raw Y å®éªŒï¼šRevCap@1% = 39.48%ï¼Œç¡®è®¤ Direct + raw Y æœ€ä¼˜ |
| 2026-01-19 | **æ–°å®éªŒç«‹é¡¹**ï¼šæŒ‡æ ‡ä½“ç³»è½åœ°(01) + å†å²è§‚çœ‹å…ˆéªŒ(02) + æ ·æœ¬åŠ æƒå›å½’(03) |
| 2026-01-19 | **Over-Attribution ä¿®å¤**ï¼šLast-Touch Attributionï¼ŒLabel/Gift ratio 116.78%â†’92.37% |
| 2026-01-19 | **Baseline é‡è·‘**ï¼šRevCap@1%=51.0%ï¼ˆä¿®å¤åï¼‰ |
