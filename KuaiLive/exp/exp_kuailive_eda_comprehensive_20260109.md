<!--
ğŸ“ Agent ä¹¦å†™è§„èŒƒï¼ˆä¸å‡ºç°åœ¨æ­£æ–‡ï¼‰:
- Header å…¨è‹±æ–‡
- æ­£æ–‡ä¸­æ–‡
- å›¾è¡¨æ–‡å­—å…¨è‹±æ–‡ï¼ˆä¸­æ–‡ä¼šä¹±ç ï¼‰
- å…¬å¼ç”¨ LaTeX: $inline$ æˆ– $$block$$
-->

# ğŸƒ KuaiLive å…¨æ–¹ä½æ¢ç´¢æ€§æ•°æ®åˆ†æ
> **Name:** KuaiLive Comprehensive EDA  \
> **ID:** `KuaiLive-20260109-eda-02`  \
> **Topic:** `kuailive` | **MVP:** MVP-0.1-Enhanced | **Project:** `VIT`  \
> **Author:** Viska Wei | **Date:** 2026-01-09 | **Status:** âœ… Completed (Phase 1-8)
>
> ğŸ¯ **Target:** å…¨æ–¹ä½ EDAï¼šç”¨æˆ·è¡Œä¸ºã€ä¸»æ’­ä¾›ç»™ã€äº¤äº’ç»“æ„ã€æ—¶åºè§„å¾‹ã€ç¨€ç–æ€§ã€å¼‚å¸¸æ£€æµ‹  \
> ğŸš€ **Decision / Next:** åŸºäºæ´è§è®¾è®¡å»ºæ¨¡æ–¹æ¡ˆï¼Œé‡ç‚¹ä¼˜åŒ–"é¦– 10% æ—¶é—´çª—å£"è½¬åŒ–

---

## âš¡ æ ¸å¿ƒç»“è®ºé€Ÿè§ˆï¼ˆä¾› main æå–ï¼›â‰¤30è¡Œï¼›å¿…å« I/O + Pipeline TL;DRï¼‰

> **ä¸€å¥è¯**: **90.36% æ‰“èµæ˜¯å³æ—¶å†²åŠ¨**ï¼ˆsession å‰ 10%ï¼‰ï¼Œ**17.6% ç”¨æˆ·é«˜è§‚çœ‹ä½ä»˜è´¹**ï¼ˆå¾…è½¬åŒ–ï¼‰ï¼Œ**18.2% ä¸»æ’­é«˜å¸å¼•ä½å˜ç°**ï¼ˆéœ€ä¼˜åŒ–ï¼‰ï¼Œæ•°æ®å¥åº·ï¼ˆå¼‚å¸¸ <0.01%ï¼‰

### 0.1 è¿™å®éªŒåˆ°åº•åœ¨åšä»€ä¹ˆï¼Ÿï¼ˆX := ç®—æ³•/æœºåˆ¶ â†’ ç›®æ ‡ | Why+How | I/O | Trade-offï¼‰

$$
X := \underbrace{\text{Comprehensive EDA (8 Phases)}}_{\text{æ˜¯ä»€ä¹ˆ}}\ \xrightarrow[\text{åŸºäº}]{\ \text{Session æ„å»º + å¤šç»´åˆ†æ}\ }\ \underbrace{\text{æŒ–æ˜å¯è¡ŒåŠ¨æ´è§}}_{\text{ç”¨äºå»ºæ¨¡/äº§å“}}\ \big|\ \underbrace{\text{Why: åŸºç¡€ EDA ç¼ºå£å¤š}}_{\text{ç—›ç‚¹}} + \underbrace{\text{How: 8 é˜¶æ®µæ·±å…¥}}_{\text{éš¾ç‚¹}}
$$

- **ğŸ» What (æ˜¯ä»€ä¹ˆ)**: 8 é˜¶æ®µå…¨æ–¹ä½ EDAï¼šæ•°æ®è´¨é‡â†’Sessionâ†’ç”¨æˆ·â†’ä¸»æ’­â†’äº¤äº’â†’æ—¶åºâ†’å¼‚å¸¸â†’å»ºè®®
- **ğŸ æ ¸å¿ƒæœºåˆ¶**: Session æ„å»ºï¼ˆuser+live_idï¼‰+ å¤šç²’åº¦åˆ†æï¼ˆSample/User/Streamerï¼‰
- **â­ ç›®æ ‡**: éªŒè¯ 5 å¤§å‡è®¾ï¼ˆH2.1-H2.5ï¼‰ï¼Œè¾“å‡ºå¯è¡ŒåŠ¨å»ºæ¨¡/äº§å“å»ºè®®
- **ğŸ©¸ Whyï¼ˆç—›ç‚¹ï¼‰**: åŸºç¡€ EDA ç¼º sessionã€æ¼æ–—ã€è±¡é™ã€ä¸“ä¸€åº¦ç­‰å…³é”®åˆ†æ
- **ğŸ’§ Howï¼ˆéš¾ç‚¹ï¼‰**: Session æ„å»ºéœ€æ—¶é—´å¯¹é½ï¼Œå¤šç»´åº¦äº¤å‰åˆ†æ

$$
\underbrace{\text{I/O ğŸ«}}_{\text{è¾“å…¥â†’è¾“å‡º}}\ =\ \underbrace{\Delta^+: \text{5 å¤§æ´è§ + å¯è¡ŒåŠ¨å»ºè®®}}_{\text{ä¼˜åŠ¿}}\ -\ \underbrace{\Delta^-: \text{åˆ†æè€—æ—¶é•¿}}_{\text{æˆæœ¬}}
$$

**I/Oï¼ˆå¿…é¡»å†™æ¸…æ¥šï¼Œè¯»è€…é è¿™ä¸€æ®µç†è§£å®éªŒ"åœ¨å¹²å˜›"ï¼‰**

| ç±»å‹ | ç¬¦å· | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|
| ğŸ« è¾“å…¥ | $\mathcal{D}$ | åŸå§‹æ•°æ®é›† | gift.csv, click.csv, user.csv, streamer.csv |
| ğŸ« è¾“å‡º | $\mathcal{S}$ | Session æ•°æ® | 4,293,908 sessions |
| ğŸ« è¾“å‡º | $F$ | å›¾è¡¨æ–‡ä»¶ | 20+ å›¾è¡¨ |
| ğŸ“Š æŒ‡æ ‡ | $r_{imm}, r_{conv}$ | æ ¸å¿ƒç»Ÿè®¡é‡ | å³æ—¶æ‰“èµ 90.36%, Session è½¬åŒ–ç‡ 1.57% |
| ğŸ åŸºçº¿ | exp_kuailive_eda | åŸºç¡€ EDA | ç¼º Sessionã€è±¡é™ã€ä¸“ä¸€åº¦åˆ†æ |

### 0.2 Pipeline TL;DRï¼ˆ5-10 è¡Œæç®€ä¼ªä»£ç ï¼Œä¸€çœ¼çœ‹æ‡‚åœ¨è·‘ä»€ä¹ˆï¼‰

```
1. Phase 1 æ•°æ®è´¨é‡ï¼šæ£€æŸ¥ç¼ºå¤±/å¼‚å¸¸/ä¸€è‡´æ€§ â†’ å¥åº·è¯„åˆ† 5.0/5.0
2. Phase 2 Session æ„å»ºï¼š
   sessions = group_by(click_df, [user_id, live_id])  # 4,293,908 sessions
   â†’ å•æ¡è¾“å‡º: {'session_id': 'u123_l456', 'user_id': 123, 'live_id': 456, 'duration': 120, 'did_gift': True}
   session_è½¬åŒ–ç‡ = 1.57%ï¼ˆä¸ click-level ä¸€è‡´ï¼‰
3. Phase 3 Session åˆ†æï¼š
   é¦–ç¤¼æ—¶é—´æ¯”ä¾‹ = t_first_gift / session_duration
   â†’ è¾“å‡º: {'first_gift_ratio_mean': 0.08, 'imm_ratio': 0.9036}  # 90.36% åœ¨å‰ 10%
4. Phase 4-5 ç”¨æˆ·/ä¸»æ’­è±¡é™ï¼š
   â†’ è¾“å‡º: {'high_watch_low_pay': {'ratio': 0.176, 'count': 4178}, 'high_attract_low_convert': {...}}
5. Phase 6 ä¸“ä¸€åº¦ï¼šâ†’ è¾“å‡º: {'gift_loyalty_P50': 1.0, 'gift_loyalty_mean': 0.85}
6. Phase 7 æ—¶åºï¼šâ†’ è¾“å‡º: {'peak_hour': 13, 'peak_day': 2}
7. Phase 8 å¼‚å¸¸ï¼šâ†’ è¾“å‡º: {'suspicious_ratio': 0.0001, 'is_healthy': True}
8. è½ç›˜ï¼šeda_comprehensive.json + img/*.png (20+ å›¾è¡¨)
```

> âš ï¸ **å¤ç°å‘½ä»¤**ï¼ˆrepo/entry/config/seedï¼‰â†’ è§ Â§7.2 é™„å½•

### 0.3 å¯¹å‡è®¾/éªŒè¯é—®é¢˜çš„å›ç­”

| éªŒè¯é—®é¢˜ | ç»“æœ | ç»“è®º |
|---------|------|------|
| H2.1: æ‰“èµæ˜¯"å³æ—¶å†²åŠ¨"è¿˜æ˜¯"ç´¯ç§¯"ï¼Ÿ | âœ… **90.36% ç«‹å³æ‰“èµ** | å‰ 10% æ—¶é—´çª—å£å…³é”® |
| H2.2: é«˜è§‚çœ‹ä½ä»˜è´¹äººç¾¤è§„æ¨¡ï¼Ÿ | âœ… **17.6% ç”¨æˆ·** | 4,178 äººå¾…è½¬åŒ– |
| H2.3: é«˜å¸å¼•ä½å˜ç°ä¸»æ’­å­˜åœ¨ï¼Ÿ | âœ… **18.2% ä¸»æ’­** | 82,540 ä¸ªéœ€ä¼˜åŒ– |
| H2.4: ä»˜è´¹æ˜¯å¦å¼ºç»‘å®šä¸»æ’­ï¼Ÿ | âœ… **loyalty P50=100%** | é«˜åº¦ä¸“ä¸€ |
| H2.5: æ•°æ®æ˜¯å¦æœ‰å¼‚å¸¸/ä½œå¼Šï¼Ÿ | âœ… **<0.01% å¼‚å¸¸** | æ•°æ®å¥åº· |

### 0.4 å…³é”®æ•°å­—ï¼ˆåªæ”¾æœ€é‡è¦çš„ 3-5 ä¸ªï¼‰

| Metric | Value | vs Baseline | Notes |
|--------|-------|------------|------|
| Session æ€»æ•° | **4,293,908** | æ–°å¢ | äººå‡ 180 session |
| Session è½¬åŒ–ç‡ | **1.57%** | â‰ˆclick 1.48% | æ„å»ºåˆç† |
| ç«‹å³æ‰“èµæ¯”ä¾‹ | **90.36%** | æ–°å¢ | å³æ—¶å†²åŠ¨ |
| é«˜è§‚çœ‹ä½ä»˜è´¹ç”¨æˆ· | **17.6%** | æ–°å¢ | å¾…è½¬åŒ– |
| æ•°æ®å¥åº·è¯„åˆ† | **5.0/5.0** | æ–°å¢ | å¯ç›´æ¥å»ºæ¨¡ |

### 0.5 Links

| Type | Link |
|------|------|
| ğŸ§  Hub | `KuaiLive/kuailive_hub.md` Â§ I1-I8 |
| ğŸ“Š Baseline | `exp_kuailive_eda_20260108.md` |
| ğŸ“ Sessions | `gift_allocation/results/sessions_20260109.parquet` |

---

# 1. ğŸ¯ ç›®æ ‡

**æ ¸å¿ƒé—®é¢˜**: åŸºç¡€ EDA ç¼ºå°‘å“ªäº›å…³é”®åˆ†æï¼Ÿå¦‚ä½•æŒ–æ˜å¯è¡ŒåŠ¨æ´è§ï¼Ÿ

**å¯¹åº” main / roadmap**:
- éªŒè¯é—®é¢˜ï¼šH2.1-H2.5ï¼ˆè§ Â§0.3ï¼‰
- MVPï¼šMVP-0.1-Enhanced

## 1.1 æˆåŠŸæ ‡å‡†ï¼ˆéªŒæ”¶ / stop ruleï¼‰

| åœºæ™¯ | é¢„æœŸç»“æœ | åˆ¤æ–­æ ‡å‡† |
|------|---------|---------|
| âœ… é€šè¿‡ | 5 å¤§å‡è®¾å…¨éƒ¨éªŒè¯ | æœ‰æ˜ç¡®ç»“è®º |
| âŒ å¦å†³ | æ•°æ®è´¨é‡å·®ï¼ˆå¼‚å¸¸ >1%ï¼‰ | éœ€æ¸…æ´— |
| âš ï¸ å¼‚å¸¸ | Session æ„å»ºä¸åˆç† | æ£€æŸ¥æ—¶é—´å¯¹é½ |

---

# 2. ğŸ¦¾ æ–¹æ³•ï¼ˆç®—æ³• + I/O + å®éªŒæµç¨‹ï¼‰

## 2.1 ç®—æ³•ï¼ˆSession æ„å»ºè§„åˆ™ï¼‰

**Session å®šä¹‰**ï¼š
- åŒä¸€ session = `user_id` + `live_id` ç›¸åŒ
- `session_start = timestamp`
- `session_end = timestamp + watch_live_time`
- `session_duration = watch_live_time`

**é¦–ç¤¼æ—¶é—´æ¯”ä¾‹**ï¼ˆå…³é”®æŒ‡æ ‡ï¼‰ï¼š

$$
\text{FirstGiftRatio} = \frac{t_{\text{first\_gift}} - t_{\text{session\_start}}}{t_{\text{session\_end}} - t_{\text{session\_start}}}
$$

## 2.2 è¾“å…¥ / è¾“å‡º

### I/O Schema

| Component | Type/Shape | Example | Notes |
|----------|------------|---------|------|
| click.csv | DataFrame (4.9M) | user_id, live_id, timestamp, watch_live_time | è§‚çœ‹è®°å½• |
| gift.csv | DataFrame (72K) | user_id, live_id, timestamp, gift_price | æ‰“èµè®°å½• |
| Output: sessions | DataFrame (4.3M) | session_id, duration, gift_count, t_first_gift | Session è¡¨ |
| Output: figs | png (20+) | img/*.png | åˆ†æå›¾è¡¨ |

### Assumptions & Constraints

| Assumption/Constraint | Why it matters | How handled |
|----------------------|----------------|------------|
| åŒ (user, live_id) ä¸ºåŒä¸€ session | ç®€åŒ–æ„å»º | ä¸è€ƒè™‘æ—¶é—´é—´éš”åˆå¹¶ |
| Gift éœ€åœ¨ session æ—¶é—´å†… | å…³è”æ‰“èµ | timestamp èŒƒå›´åŒ¹é… |

## 2.3 å®ç°è¦ç‚¹

| What | Where (file:function) | Key detail |
|------|------------------------|-----------|
| Session æ„å»º | `scripts/eda_comprehensive.py:build_sessions` | groupby + agg |
| é¦–ç¤¼åˆ†æ | `scripts/eda_comprehensive.py:analyze_first_gift` | æ¯”ä¾‹è®¡ç®— |
| ç”¨æˆ·è±¡é™ | `scripts/eda_comprehensive.py:analyze_user_quadrant` | 2D åˆ†ç¾¤ |
| ä¸“ä¸€åº¦ | `scripts/eda_comprehensive.py:analyze_loyalty` | Top1 å æ¯” |

## 2.4 å®éªŒæµç¨‹

### 2.4.1 å®éªŒæµç¨‹æ ‘çŠ¶å›¾ï¼ˆå®Œæ•´å¯è§†åŒ–ï¼‰

> âš ï¸ **æ¯ä¸€æ­¥éƒ½å¸¦ I/O æ•°å€¼ä¾‹å­**ï¼Œè®©è¯»è€…ç§’æ‡‚æ¯ä¸ª Phase çš„è¾“å‡ºæ˜¯ä»€ä¹ˆ

```
ç»¼åˆ EDA æµç¨‹ï¼ˆ8 Phasesï¼‰
â”‚
â”œâ”€â”€ Phase 1. æ•°æ®è´¨é‡å®¡è®¡
â”‚   â”œâ”€â”€ æ£€æŸ¥ï¼šç¼ºå¤±å€¼ã€å¼‚å¸¸å€¼ã€ä¸€è‡´æ€§
â”‚   â””â”€â”€ è¾“å‡º: {'missing_ratio': 0.0, 'anomaly_ratio': 0.0001, 'health_score': 5.0}
â”‚
â”œâ”€â”€ Phase 2. Session æ„å»º â­
â”‚   â”œâ”€â”€ è§„åˆ™ï¼šåŒ (user_id, live_id) ä¸ºä¸€ä¸ª session
â”‚   â”œâ”€â”€ è¾“å…¥: click_df (4.9M æ¡)
â”‚   â””â”€â”€ è¾“å‡º: sessions_df (4,293,908 æ¡)
â”‚       â””â”€â”€ å•æ¡: {'session_id': 'u123_l456', 'user_id': 123, 'live_id': 456, 'duration': 120}
â”‚
â”œâ”€â”€ Phase 3. Session åˆ†æ â­
â”‚   â”œâ”€â”€ è½¬åŒ–ç‡ï¼š1.57%
â”‚   â”œâ”€â”€ é¦–ç¤¼æ—¶é—´æ¯”ä¾‹ï¼š90.36% åœ¨å‰ 10%
â”‚   â””â”€â”€ è¾“å‡º: {'conv_rate': 0.0157, 'imm_gift_ratio': 0.9036, 'first_gift_ratio_P50': 0.03}
â”‚
â”œâ”€â”€ Phase 4. ç”¨æˆ·è¡Œä¸ºåˆ†æ
â”‚   â”œâ”€â”€ äºŒç»´è±¡é™ï¼šè§‚çœ‹ vs ä»˜è´¹
â”‚   â”œâ”€â”€ é«˜è§‚çœ‹ä½ä»˜è´¹ï¼š17.6% (4,178 äºº)
â”‚   â””â”€â”€ è¾“å‡º: {'quadrant': {'high_watch_low_pay': 4178, 'high_watch_high_pay': 1234, ...}}
â”‚
â”œâ”€â”€ Phase 5. ä¸»æ’­ä¾›ç»™åˆ†æ
â”‚   â”œâ”€â”€ äºŒç»´è±¡é™ï¼šè§‚çœ‹ vs æ”¶å…¥
â”‚   â”œâ”€â”€ é«˜å¸å¼•ä½å˜ç°ï¼š18.2% (82,540 ä¸»æ’­)
â”‚   â””â”€â”€ è¾“å‡º: {'quadrant': {'high_attract_low_convert': 82540, ...}}
â”‚
â”œâ”€â”€ Phase 6. äº¤äº’åˆ†æ
â”‚   â”œâ”€â”€ ä¸“ä¸€åº¦ï¼šgift_loyalty P50=100%
â”‚   â””â”€â”€ è¾“å‡º: {'loyalty_P50': 1.0, 'loyalty_mean': 0.85, 'multi_streamer_ratio': 0.15}
â”‚
â”œâ”€â”€ Phase 7. æ—¶åºåˆ†æ
â”‚   â”œâ”€â”€ å³°å€¼ï¼šHour=13, Day=2
â”‚   â”œâ”€â”€ 7Ã—24 çƒ­åŠ›å›¾
â”‚   â””â”€â”€ è¾“å‡º: {'peak_hour': 13, 'peak_day': 2, 'heatmap': ndarray(7, 24)}
â”‚   â””â”€â”€ Code: `analyze_temporal()`
â”‚
â””â”€â”€ Phase 8. å¼‚å¸¸æ£€æµ‹
    â”œâ”€â”€ å¯ç–‘æ ·æœ¬ï¼š<0.01%
    â””â”€â”€ Code: `detect_anomalies()`
```

### 2.4.2 æ¨¡å—æ‹†è§£ï¼ˆ8 Phasesï¼Œå¸¦ Code Pointerï¼‰

| Module | Responsibility | Input â†’ Output | Code Pointer |
|--------|----------------|----------------|--------------|
| Phase 1 | æ•°æ®è´¨é‡å®¡è®¡ | raw csv â†’ quality score | `audit_data_quality()` |
| Phase 2 | Session æ„å»º | click + gift â†’ sessions df | `build_sessions()` |
| Phase 3 | Session & Funnel | sessions â†’ é¦–ç¤¼åˆ†æ, æ¼æ–— | `analyze_session_funnel()` |
| Phase 4 | User Behavior | sessions â†’ ç”¨æˆ·è±¡é™ | `analyze_user_quadrant()` |
| Phase 5 | Supply Side | sessions â†’ ä¸»æ’­è±¡é™ | `analyze_streamer_quadrant()` |
| Phase 6 | Interaction | user-streamer â†’ ä¸“ä¸€åº¦ | `analyze_loyalty()` |
| Phase 7 | Time & Season | sessions â†’ 7Ã—24 çƒ­åŠ›å›¾ | `analyze_temporal()` |
| Phase 8 | Anomaly | sessions â†’ å¼‚å¸¸æ£€æµ‹ | `detect_anomalies()` |

### 2.4.3 æ ¸å¿ƒå¾ªç¯å±•å¼€ï¼ˆSession æ„å»º + é¦–ç¤¼åˆ†æï¼‰

```python
# === Phase 2: Session æ„å»º ===

def build_sessions(click_df, gift_df):
    # 1. æŒ‰ (user_id, live_id) èšåˆ click
    sessions = click_df.groupby(['user_id', 'live_id']).agg({
        'timestamp': 'min',           # session_start
        'watch_live_time': 'sum',     # session_duration
        'streamer_id': 'first',
    }).reset_index()
    
    # 2. å…³è” gift è®°å½•
    sessions['gift_count'] = 0
    sessions['t_first_gift'] = np.nan
    for (user, live), gifts in gift_df.groupby(['user_id', 'live_id']):
        idx = sessions[(sessions.user_id==user) & (sessions.live_id==live)].index
        if len(idx) > 0:
            sessions.loc[idx, 'gift_count'] = len(gifts)
            sessions.loc[idx, 't_first_gift'] = gifts['timestamp'].min()
    
    return sessions  # 4,293,908 sessions

# === Phase 3: é¦–ç¤¼æ—¶é—´åˆ†æ ===

def analyze_first_gift(sessions):
    gift_sessions = sessions[sessions.gift_count > 0]
    
    # è®¡ç®—é¦–ç¤¼æ—¶é—´ç›¸å¯¹æ¯”ä¾‹
    gift_sessions['first_gift_ratio'] = (
        (gift_sessions['t_first_gift'] - gift_sessions['timestamp']) / 
        gift_sessions['watch_live_time']
    )
    
    # ç»Ÿè®¡ "ç«‹å³æ‰“èµ" æ¯”ä¾‹
    immediate_ratio = (gift_sessions['first_gift_ratio'] < 0.1).mean()
    return immediate_ratio  # 90.36%
```

### 2.4.5 å¤ç°æ¸…å•

- [x] Session æ„å»ºï¼š4,293,908 sessions
- [x] é¦–ç¤¼åˆ†æï¼š90.36% ç«‹å³æ‰“èµ
- [x] ç”¨æˆ·è±¡é™ï¼š17.6% é«˜è§‚çœ‹ä½ä»˜è´¹
- [x] ä¸»æ’­è±¡é™ï¼š18.2% é«˜å¸å¼•ä½å˜ç°
- [x] ä¸“ä¸€åº¦ï¼šgift_loyalty P50=100%
- [x] å¼‚å¸¸æ£€æµ‹ï¼š<0.01% å¼‚å¸¸

---

# 3. ğŸ§ª å®éªŒè®¾è®¡

## 3.1 æ•°æ®ï¼ˆåŒåŸºç¡€ EDAï¼‰

| Item | Value |
|------|-------|
| Source | KuaiLive å…¬å¼€æ•°æ®é›† |
| æ—¶é—´èŒƒå›´ | 2025-05-05 è‡³ 2025-05-25 (21 å¤©) |
| Session æ€»æ•° | 4,293,908 |
| Session è½¬åŒ–ç‡ | 1.57% |

## 3.2 åˆ†æç»´åº¦

| ç»´åº¦ | æŒ‡æ ‡ |
|------|------|
| Session | è½¬åŒ–ç‡, é¦–ç¤¼æ—¶é—´, æ—¶é•¿åˆ†å¸ƒ |
| ç”¨æˆ·è±¡é™ | é«˜è§‚çœ‹ä½ä»˜è´¹/é«˜è§‚çœ‹é«˜ä»˜è´¹/... |
| ä¸»æ’­è±¡é™ | é«˜å¸å¼•ä½å˜ç°/é«˜å¸å¼•é«˜å˜ç°/... |
| ä¸“ä¸€åº¦ | watch_loyalty, gift_loyalty |
| æ—¶åº | 7Ã—24 çƒ­åŠ›å›¾ |

---

# 4. ğŸ“Š å›¾è¡¨ & ç»“æœ

### Fig 3.1: é¦–ç¤¼æ—¶é—´ç›¸å¯¹ Session çš„åˆ†å¸ƒ
![](../img/first_gift_time_ratio.png)

**What it shows**: æ‰“èµå‘ç”Ÿæ—¶é—´ç›¸å¯¹ session å¼€å§‹çš„æ¯”ä¾‹åˆ†å¸ƒ

**Key observations**:
- **90.36% ç«‹å³æ‰“èµ**ï¼š90%+ åœ¨ session å‰ 10% æ—¶é—´å†…
- **ä¸­ä½æ•° = 0.0**ï¼šå¤§éƒ¨åˆ†æ‰“èµå‘ç”Ÿåœ¨ session å¼€å§‹ç¬é—´
- **éªŒè¯"å³æ—¶å†²åŠ¨"å‡è®¾**

### Fig 4.4: ç”¨æˆ·äºŒç»´è±¡é™ï¼ˆè§‚çœ‹ vs ä»˜è´¹ï¼‰
![](../img/user_quadrant.png)

**What it shows**: ç”¨æˆ·æŒ‰è§‚çœ‹æ—¶é•¿å’Œä»˜è´¹é‡‘é¢åˆ†å››è±¡é™

**Key observations**:
- **é«˜è§‚çœ‹ä½ä»˜è´¹ï¼š17.6%**ï¼ˆ4,178 äººï¼‰ï¼šé‡è¦å¾…è½¬åŒ–äººç¾¤
- **é«˜è§‚çœ‹é«˜ä»˜è´¹ï¼š7.4%**ï¼ˆ1,765 äººï¼‰ï¼šç†æƒ³ç”¨æˆ·
- **ä½è§‚çœ‹é«˜ä»˜è´¹ï¼š17.0%**ï¼ˆ4,046 äººï¼‰ï¼šå†²åŠ¨ä»˜è´¹
- **ä½è§‚çœ‹ä½ä»˜è´¹ï¼š58.0%**ï¼ˆ13,783 äººï¼‰ï¼šæ™®é€šç”¨æˆ·

### Fig 5.3: ä¸»æ’­äºŒç»´è±¡é™ï¼ˆè§‚çœ‹æ—¶é•¿ vs æ”¶å…¥ï¼‰
![](../img/streamer_quadrant_revenue.png)

**What it shows**: ä¸»æ’­æŒ‰è§‚çœ‹æ—¶é•¿å’Œæ”¶å…¥åˆ†å››è±¡é™

**Key observations**:
- **é«˜å¸å¼•ä½å˜ç°ï¼š18.2%**ï¼ˆ82,540 ä¸ªï¼‰ï¼šéœ€ä¼˜åŒ–ç­–ç•¥
- **é«˜å¸å¼•é«˜å˜ç°ï¼š6.8%**ï¼ˆ30,615 ä¸ªï¼‰ï¼šå¤´éƒ¨ä¸»æ’­
- **ä½å¸å¼•é«˜å˜ç°ï¼š0.8%**ï¼ˆ3,841 ä¸ªï¼‰ï¼šç²¾å‡†æ¨è

### Fig 6.3: ç”¨æˆ·ä¸“ä¸€åº¦åˆ†å¸ƒ
![](../img/user_loyalty_dist.png)

**What it shows**: ç”¨æˆ·å¯¹ä¸»æ’­çš„ä»˜è´¹ä¸“ä¸€åº¦

**Key observations**:
- **Gift loyalty P50=100%**ï¼šä»˜è´¹ç”¨æˆ·å‡ ä¹åªæ‰“èµ Top1 ä¸»æ’­
- **Watch loyalty P50=35.6%**ï¼šè§‚çœ‹ç›¸å¯¹åˆ†æ•£
- **ç»“è®º**ï¼šä»˜è´¹æ¯”è§‚çœ‹æ›´ä¸“ä¸€

---

# 5. ğŸ’¡ æ´è§

## 5.1 æœºåˆ¶å±‚ï¼ˆMechanism)
- **å³æ—¶å†²åŠ¨**ï¼š90.36% æ‰“èµåœ¨ session å‰ 10% æ—¶é—´å†…ï¼Œéç´¯ç§¯è¡Œä¸º
- **ä»˜è´¹ä¸“ä¸€**ï¼šgift_loyalty=100%ï¼Œä»˜è´¹å¼ºç»‘å®š Top1 ä¸»æ’­

## 5.2 å®éªŒå±‚ï¼ˆDiagnostics)
- **Session æ„å»ºåˆç†**ï¼šè½¬åŒ–ç‡ 1.57% â‰ˆ click-level 1.48%
- **æ•°æ®å¥åº·**ï¼šå¼‚å¸¸ <0.01%ï¼Œæ— éœ€é¢å¤–æ¸…æ´—

## 5.3 è®¾è®¡å±‚ï¼ˆSo what)
- **é¦– 10% çª—å£ä¼˜åŒ–**ï¼šäº§å“ç­–ç•¥é‡ç‚¹
- **é«˜è§‚çœ‹ä½ä»˜è´¹è½¬åŒ–**ï¼š17.6% ç”¨æˆ·æ˜¯æ½œåŠ›äººç¾¤
- **Pair ç‰¹å¾é‡è¦**ï¼šä»˜è´¹ä¸“ä¸€æ€§è¦æ±‚ user-streamer pair å»ºæ¨¡

---

# 6. ğŸ“ ç»“è®º & ä¸‹ä¸€æ­¥

## 6.1 æ ¸å¿ƒå‘ç°ï¼ˆpunch lineï¼‰
> **5 å¤§å‡è®¾å…¨éƒ¨éªŒè¯ï¼šå³æ—¶å†²åŠ¨ 90%+ï¼Œé«˜è§‚çœ‹ä½ä»˜è´¹ 17.6%ï¼Œé«˜å¸å¼•ä½å˜ç° 18.2%ï¼Œä»˜è´¹ä¸“ä¸€ 100%ï¼Œæ•°æ®å¥åº· <0.01%**

- âœ… H2.1-H2.5: å…¨éƒ¨éªŒè¯
- **Decision**: å¯åŸºäºæ´è§è®¾è®¡å»ºæ¨¡æ–¹æ¡ˆ

## 6.2 å…³é”®ç»“è®º

| # | ç»“è®º | è¯æ® | é€‚ç”¨èŒƒå›´ |
|---|------|------|---------|
| 1 | **æ‰“èµå³æ—¶å†²åŠ¨** | 90.36% å‰ 10% æ—¶é—´ | Session è®¾è®¡ |
| 2 | **é«˜è§‚çœ‹ä½ä»˜è´¹å¾…è½¬åŒ–** | 17.6% (4,178 äºº) | äººç¾¤ç­–ç•¥ |
| 3 | **é«˜å¸å¼•ä½å˜ç°éœ€ä¼˜åŒ–** | 18.2% (82,540 ä¸»æ’­) | ä¸»æ’­ç­–ç•¥ |
| 4 | **ä»˜è´¹é«˜åº¦ä¸“ä¸€** | loyalty P50=100% | Pair ç‰¹å¾ |
| 5 | **æ•°æ®å¥åº·** | å¼‚å¸¸ <0.01% | å¯ç›´æ¥å»ºæ¨¡ |

## 6.3 Trade-offs

| Upside (Î”+) | Cost / Constraint (Î”-) | When acceptable |
|-------------|--------------------------|----------------|
| 5 å¤§æ´è§éªŒè¯ | åˆ†æè€—æ—¶è¾ƒé•¿ | ä¸€æ¬¡æ€§æ·±åº¦åˆ†æ |
| å¯è¡ŒåŠ¨å»ºè®® | éœ€äº§å“/è¿è¥é…åˆ | è·¨å›¢é˜Ÿåä½œ |

## 6.4 ä¸‹ä¸€æ­¥

| Priority | Task | Owner | Link |
|----------|------|-------|------|
| ğŸ”´ P0 | é¦– 10% æ—¶é—´çª—å£ç‰¹å¾å·¥ç¨‹ | Model | å»ºæ¨¡ |
| ğŸ”´ P0 | é«˜è§‚çœ‹ä½ä»˜è´¹äººç¾¤è½¬åŒ–ç­–ç•¥ | Product | äº§å“ |
| ğŸŸ¡ P1 | é«˜å¸å¼•ä½å˜ç°ä¸»æ’­æ‰¶æŒ | Ops | è¿è¥ |
| ğŸŸ¡ P1 | User-Streamer Pair ç‰¹å¾ | Model | å»ºæ¨¡ |

---

# 7. ğŸ“ é™„å½•

## 7.1 æ•°å€¼ç»“æœï¼ˆPhase 1-8ï¼‰

| æŒ‡æ ‡ | å€¼ | Phase |
|------|-----|-------|
| æ•°æ®å¥åº·è¯„åˆ† | 5.0/5.0 | P1 |
| Session æ€»æ•° | 4,293,908 | P2 |
| Session è½¬åŒ–ç‡ | 1.57% | P2 |
| ç«‹å³æ‰“èµæ¯”ä¾‹ | 90.36% | P3 |
| Session P99/P50 | 1,895Ã— | P3 |
| é«˜è§‚çœ‹ä½ä»˜è´¹ç”¨æˆ· | 17.6% (4,178) | P4 |
| é«˜å¸å¼•ä½å˜ç°ä¸»æ’­ | 18.2% (82,540) | P5 |
| Gift loyalty P50 | 100% | P6 |
| Watch loyalty P50 | 35.6% | P6 |
| å³°å€¼æ—¶æ®µ | Hour 13, Day 2 | P7 |
| å¯ç–‘ç”¨æˆ· | 4 (0.006%) | P8 |
| å¯ç–‘é—´éš” | 5 (0.007%) | P8 |

## 7.2 æ‰§è¡Œè®°å½•

| Item | Value |
|------|-------|
| Repo | `~/GiftLive` |
| Script | `scripts/eda_comprehensive.py` |
| Output | `KuaiLive/img/`, `gift_allocation/results/sessions_20260109.parquet` |

```bash
# (1) setup
cd ~/GiftLive
source init.sh

# (2) run Phase 1-8
python scripts/eda_comprehensive.py --all 2>&1 | tee logs/eda_comprehensive.log
```

## 7.3 å»ºæ¨¡/äº§å“å»ºè®®æ±‡æ€»

| # | å»ºè®® | ç†ç”± | ä¼˜å…ˆçº§ |
|---|------|------|--------|
| 1 | **é¦– 10% æ—¶é—´çª—å£ç‰¹å¾** | 90.36% æ‰“èµåœ¨æ­¤å‘ç”Ÿ | ğŸ”´ P0 |
| 2 | **é«˜è§‚çœ‹ä½ä»˜è´¹äººç¾¤è½¬åŒ–** | 17.6% å¾…è½¬åŒ– | ğŸ”´ P0 |
| 3 | **User-Streamer Pair ç‰¹å¾** | ä»˜è´¹ä¸“ä¸€ 100% | ğŸ”´ P0 |
| 4 | **é«˜å¸å¼•ä½å˜ç°ä¸»æ’­æ‰¶æŒ** | 18.2% éœ€ä¼˜åŒ– | ğŸŸ¡ P1 |
| 5 | **Session çº§å»ºæ¨¡ç²’åº¦** | è½¬åŒ–ç‡ä¸€è‡´ | ğŸŸ¡ P1 |
| 6 | **æ—¶é—´çª—å£ç‰¹å¾ (hour, dow)** | å³°å€¼æ˜æ˜¾ | ğŸŸ¡ P1 |

---

> **å®éªŒå®Œæˆæ—¶é—´**: 2026-01-17 (Phase 1-8 å…¨éƒ¨å®Œæˆ)
